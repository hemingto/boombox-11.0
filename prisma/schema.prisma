generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                              Int                              @id @default(autoincrement())
  firstName                       String
  lastName                        String
  email                           String                           @unique
  phoneNumber                     String                           @unique
  verifiedPhoneNumber             Boolean                          @default(false)
  stripeCustomerId                String?
  appointments                    Appointment[]
  packingSupplyOrders             PackingSupplyOrder[]
  packingSupplyOrderCancellations PackingSupplyOrderCancellation[]
  storageUnitUsages               StorageUnitUsage[]
}

model Appointment {
  id                        Int                          @id @default(autoincrement())
  jobCode                   String?                      @unique
  userId                    Int
  movingPartnerId           Int?
  thirdPartyMovingPartnerId Int?
  appointmentType           String
  address                   String
  zipcode                   String
  date                      DateTime
  time                      DateTime
  numberOfUnits             Int?
  planType                  String?
  insuranceCoverage         String?
  loadingHelpPrice          Float?
  monthlyStorageRate        Float?
  monthlyInsuranceRate      Float?
  quotedPrice               Float
  invoiceTotal              Float?
  status                    String
  description               String?
  deliveryReason            String?
  totalEstimatedCost        Float?
  totalActualCost           Float?
  costLastUpdatedAt         DateTime?
  trackingToken             String?                      @unique
  trackingUrl               String?
  invoiceUrl                String?
  serviceStartTime          String?
  serviceEndTime            String?
  calledMovingPartner       Boolean                      @default(false)
  gotHoldOfMovingPartner    Boolean?
  additionalInfo            AdditionalAppointmentInfo?
  movingPartner             MovingPartner?               @relation(fields: [movingPartnerId], references: [id])
  thirdPartyMovingPartner   ThirdPartyMovingPartner?     @relation(fields: [thirdPartyMovingPartnerId], references: [id])
  user                      User                         @relation(fields: [userId], references: [id])
  appointmentCancellations  AppointmentCancellation[]
  driverCancellations       DriverCancellation[]
  driverTimeSlotBooking     DriverTimeSlotBooking?
  feedback                  Feedback?
  moverCancellations        MoverCancellation[]
  notifications             Notification[]
  onfleetTasks              OnfleetTask[]
  requestedStorageUnits     RequestedAccessStorageUnit[]
  damageReports             StorageUnitDamageReport[]
  storageEndUsages          StorageUnitUsage[]           @relation("StorageEnd")
  storageStartUsages        StorageUnitUsage[]           @relation("StorageStart")
  timeSlotBooking           TimeSlotBooking?
}

model AdditionalAppointmentInfo {
  id                     Int         @id @default(autoincrement())
  appointmentId          Int         @unique
  itemsOver100lbs        Boolean
  storageTerm            String?
  storageAccessFrequency String?
  moveDescription        String?
  conditionsDescription  String?
  appointment            Appointment @relation(fields: [appointmentId], references: [id])
}

model AppointmentCancellation {
  id                 Int         @id @default(autoincrement())
  appointmentId      Int
  cancellationFee    Float
  cancellationReason String
  cancellationDate   DateTime
  appointment        Appointment @relation(fields: [appointmentId], references: [id])
}

model MovingPartner {
  id                              Int                         @id @default(autoincrement())
  name                            String
  description                     String?
  phoneNumber                     String?                     @unique
  verifiedPhoneNumber             Boolean?                    @default(false)
  email                           String?                     @unique
  hourlyRate                      Float?
  website                         String?
  featured                        String?
  imageSrc                        String?
  onfleetTeamId                   String?
  isApproved                      Boolean?                    @default(false)
  numberOfEmployees               String?
  applicationComplete             Boolean?                    @default(false)
  status                          MovingPartnerStatus         @default(INACTIVE)
  stripeConnectAccountId          String?
  stripeConnectOnboardingComplete Boolean                     @default(false)
  stripeConnectPayoutsEnabled     Boolean                     @default(false)
  stripeConnectDetailsSubmitted   Boolean                     @default(false)
  agreedToTerms                   Boolean                     @default(false)
  agreedToTermsAt                 DateTime?
  activeMessageShown              Boolean                     @default(false)
  driverAssignmentMode            DriverAssignmentMode        @default(MANUAL)
  appointments                    Appointment[]
  driverInvitations               DriverInvitation[]
  feedback                        Feedback[]
  moverCancellations              MoverCancellation[]
  availability                    MovingPartnerAvailability[]
  approvedDrivers                 MovingPartnerDriver[]
  vehicles                        Vehicle[]
}

model MovingPartnerAvailability {
  id               Int               @id @default(autoincrement())
  movingPartnerId  Int
  dayOfWeek        String
  startTime        String
  endTime          String
  maxCapacity      Int               @default(1)
  isBlocked        Boolean           @default(false)
  createdAt        DateTime?
  updatedAt        DateTime?
  movingPartner    MovingPartner     @relation(fields: [movingPartnerId], references: [id])
  timeSlotBookings TimeSlotBooking[]

  @@index([movingPartnerId, dayOfWeek])
}

model TimeSlotBooking {
  id                          Int                       @id @default(autoincrement())
  movingPartnerAvailabilityId Int
  appointmentId               Int                       @unique
  bookingDate                 DateTime
  endDate                     DateTime
  appointment                 Appointment               @relation(fields: [appointmentId], references: [id])
  movingPartnerAvailability   MovingPartnerAvailability @relation(fields: [movingPartnerAvailabilityId], references: [id])

  @@index([bookingDate, movingPartnerAvailabilityId])
}

model StorageUnit {
  id                Int                          @id @default(autoincrement())
  storageUnitNumber String                       @unique
  barcode           String?                      @unique
  status            String
  lastUpdated       DateTime                     @updatedAt
  cleaningPhotos    String[]
  lastCleanedAt     DateTime?
  onfleetTasks      OnfleetTask[]
  accessRequests    RequestedAccessStorageUnit[]
  cleaningHistory   StorageUnitCleaning[]
  damageReports     StorageUnitDamageReport[]
  storageUnitUsages StorageUnitUsage[]
}

model StorageUnitUsage {
  id                 Int          @id @default(autoincrement())
  storageUnitId      Int
  userId             Int
  startAppointmentId Int?
  endAppointmentId   Int?
  warehouseLocation  String?
  warehouseName      String?
  usageStartDate     DateTime
  usageEndDate       DateTime?
  mainImage          String?
  uploadedImages     String[]
  unitPickupPhotos   String[]
  description        String?
  padlockCombo       String?
  endAppointment     Appointment? @relation("StorageEnd", fields: [endAppointmentId], references: [id])
  startAppointment   Appointment? @relation("StorageStart", fields: [startAppointmentId], references: [id])
  storageUnit        StorageUnit  @relation(fields: [storageUnitId], references: [id])
  user               User         @relation(fields: [userId], references: [id])
}

model PackingKit {
  id                  Int       @id @default(autoincrement())
  title               String
  price               Float
  description         String
  detailedDescription String
  imageSrc            String
  products            Product[]
}

model Product {
  id                  Int                         @id @default(autoincrement())
  price               Float
  title               String
  description         String
  detailedDescription String
  imageSrc            String
  imageAlt            String
  category            String
  packingKitId        Int?
  quantity            Int                         @default(0)
  stockCount          Int?
  isOutOfStock        Boolean                     @default(false)
  restockDate         DateTime?
  createdAt           DateTime                    @default(now())
  updatedAt           DateTime                    @updatedAt
  orderDetails        PackingSupplyOrderDetails[]
  packingKit          PackingKit?                 @relation(fields: [packingKitId], references: [id])

  @@index([category])
  @@index([isOutOfStock])
}

model PackingSupplyOrder {
  id                    Int                              @id @default(autoincrement())
  userId                Int?
  deliveryAddress       String
  contactName           String
  contactEmail          String
  contactPhone          String
  orderDate             DateTime                         @default(now())
  deliveryDate          DateTime
  totalPrice            Float
  status                String                           @default("Pending")
  paymentMethod         String
  paymentStatus         String?                          @default("pending")
  stripePaymentIntentId String?
  onfleetTaskId         String?
  onfleetTaskShortId    String?
  assignedDriverId      Int?
  deliveryWindowStart   DateTime?
  deliveryWindowEnd     DateTime?
  actualDeliveryTime    DateTime?
  deliveryPhotoUrl      String?
  driverPayoutAmount    Decimal?
  driverPayoutStatus    String?                          @default("pending")
  routeMetrics          Json?
  routeId               String?
  routePayoutTotal      Decimal?
  routeStopNumber       Int?
  trackingToken         String?                          @unique
  trackingUrl           String?
  batchProcessedAt      DateTime?
  optimizationJobId     String?
  isPrepped             Boolean                          @default(false)
  preppedAt             DateTime?
  preppedBy             Int?
  notifications         Notification[]
  feedback              PackingSupplyFeedback?
  assignedDriver        Driver?                          @relation(fields: [assignedDriverId], references: [id])
  preppedByAdmin        Admin?                           @relation(fields: [preppedBy], references: [id])
  route                 PackingSupplyRoute?              @relation(fields: [routeId], references: [routeId])
  user                  User?                            @relation(fields: [userId], references: [id])
  cancellations         PackingSupplyOrderCancellation[]
  orderDetails          PackingSupplyOrderDetails[]

  @@index([onfleetTaskId])
  @@index([onfleetTaskShortId])
  @@index([assignedDriverId])
  @@index([deliveryWindowStart])
  @@index([routeId])
}

model PackingSupplyRoute {
  id                    String               @id @default(cuid())
  routeId               String               @unique
  driverId              Int?
  deliveryDate          DateTime
  totalStops            Int
  completedStops        Int                  @default(0)
  routeStatus           String               @default("in_progress")
  totalDistance         Decimal?
  totalTime             Int?
  startTime             DateTime?
  endTime               DateTime?
  payoutAmount          Decimal?
  payoutStatus          String               @default("pending")
  payoutTransferId      String?
  payoutProcessedAt     DateTime?
  payoutFailureReason   String?
  onfleetOptimizationId String?
  driverOfferSentAt     DateTime?
  driverOfferExpiresAt  DateTime?
  driverOfferStatus     String?
  offeredDriverIds      Int[]                @default([])
  createdAt             DateTime             @default(now())
  updatedAt             DateTime             @updatedAt
  orders                PackingSupplyOrder[]
  driver                Driver?              @relation(fields: [driverId], references: [id])

  @@index([driverId])
  @@index([deliveryDate])
  @@index([routeStatus])
  @@index([payoutStatus])
}

model PackingSupplyOrderDetails {
  id        Int                @id @default(autoincrement())
  orderId   Int
  productId Int
  quantity  Int
  price     Float
  order     PackingSupplyOrder @relation(fields: [orderId], references: [id])
  product   Product            @relation(fields: [productId], references: [id])
}

model ThirdPartyMovingPartner {
  id           Int           @id @default(autoincrement())
  title        String
  description  String
  imageSrc     String?
  rating       Float
  reviews      String
  weblink      String?
  gmblink      String?
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  appointments Appointment[]
}

model OnfleetTask {
  id                       Int          @id @default(autoincrement())
  appointmentId            Int
  taskId                   String
  shortId                  String       @unique
  stepNumber               Int
  unitNumber               Int
  webhookTime              String?
  driverId                 Int?
  storageUnitId            Int?
  driverVerified           Boolean      @default(false)
  driverFeedback           String?
  completionPhotoUrl       String?
  completedAt              DateTime?
  lastNotifiedDriverId     Int?
  driverNotificationSentAt DateTime?
  driverNotificationStatus String?
  driverAcceptedAt         DateTime?
  driverDeclinedAt         DateTime?
  declinedDriverIds        Int[]        @default([])
  estimatedCost            Float?
  actualCost               Float?
  costCalculatedAt         DateTime?
  workerType               String?
  estimatedServiceHours    Float?
  actualServiceHours       Float?
  estimatedDistanceMiles   Float?
  estimatedDriveTimeMinutes Float?
  actualDistanceMiles      Float?
  actualDriveTimeMinutes   Float?
  fixedFeePay              Float?
  mileagePay               Float?
  driveTimePay             Float?
  serviceTimePay           Float?
  payoutAmount             Float?
  payoutStatus             String?
  payoutTransferId         String?
  payoutProcessedAt        DateTime?
  payoutFailureReason      String?
  payoutRetryCount         Int          @default(0)
  payoutLastAttemptAt      DateTime?
  lastProcessedWebhookTime BigInt?
  appointment              Appointment  @relation(fields: [appointmentId], references: [id])
  driver                   Driver?      @relation(fields: [driverId], references: [id])
  storageUnit              StorageUnit? @relation(fields: [storageUnitId], references: [id])

  @@index([taskId])
  @@index([appointmentId])
  @@index([driverId])
  @@index([storageUnitId])
}

model Feedback {
  id                 Int            @id @default(autoincrement())
  appointmentId      Int            @unique
  movingPartnerId    Int?
  rating             Int
  comment            String         @default("")
  tipAmount          Float          @default(0)
  tipPaymentIntentId String?
  tipPaymentStatus   String?
  responded          Boolean        @default(false)
  response           String?
  createdAt          DateTime       @default(now())
  updatedAt          DateTime       @updatedAt
  appointment        Appointment    @relation(fields: [appointmentId], references: [id])
  movingPartner      MovingPartner? @relation(fields: [movingPartnerId], references: [id])

  @@index([movingPartnerId])
}

model PackingSupplyFeedback {
  id                   Int                @id @default(autoincrement())
  packingSupplyOrderId Int                @unique
  rating               Int
  comment              String             @default("")
  tipAmount            Float              @default(0)
  tipPaymentIntentId   String?
  tipPaymentStatus     String?
  driverRating         String?
  responded            Boolean            @default(false)
  response             String?
  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @updatedAt
  packingSupplyOrder   PackingSupplyOrder @relation(fields: [packingSupplyOrderId], references: [id])

  @@index([packingSupplyOrderId])
}

model RequestedAccessStorageUnit {
  id                        Int         @id @default(autoincrement())
  appointmentId             Int
  storageUnitId             Int
  unitsReady                Boolean     @default(false)
  requestedUnitPickupPhotos String[]
  createdAt                 DateTime    @default(now())
  appointment               Appointment @relation(fields: [appointmentId], references: [id])
  storageUnit               StorageUnit @relation(fields: [storageUnitId], references: [id])

  @@unique([appointmentId, storageUnitId])
  @@index([appointmentId])
  @@index([storageUnitId])
}

model Driver {
  id                              Int                   @id @default(autoincrement())
  firstName                       String
  lastName                        String
  email                           String                @unique
  phoneNumber                     String?               @unique
  verifiedPhoneNumber             Boolean?              @default(false)
  phoneProvider                   String
  location                        String
  services                        String[]
  vehicleType                     String
  hasTrailerHitch                 Boolean
  isApproved                      Boolean               @default(false)
  applicationComplete             Boolean?              @default(false)
  onfleetWorkerId                 String?
  onfleetTeamIds                  String[]
  status                          String                @default("Pending")
  driverLicenseFrontPhoto         String?
  driverLicenseBackPhoto          String?
  profilePicture                  String?
  consentToBackgroundCheck        Boolean               @default(false)
  createdAt                       DateTime              @default(now())
  updatedAt                       DateTime              @updatedAt
  stripeConnectAccountId          String?
  stripeConnectOnboardingComplete Boolean               @default(false)
  stripeConnectPayoutsEnabled     Boolean               @default(false)
  stripeConnectDetailsSubmitted   Boolean               @default(false)
  agreedToTerms                   Boolean               @default(false)
  agreedToTermsAt                 DateTime?
  activeMessageShown              Boolean               @default(false)
  completedPackingSupplyJobs      Int                   @default(0)
  averageRating                   Float?
  lastRatingUpdate                DateTime?
  availability                    DriverAvailability[]
  cancellations                   DriverCancellation[]
  movingPartnerAssociations       MovingPartnerDriver[]
  assignedTasks                   OnfleetTask[]
  packingSupplyDeliveries         PackingSupplyOrder[]
  packingSupplyRoutes             PackingSupplyRoute[]
  vehicles                        Vehicle[]
}

model Vehicle {
  id                 Int            @id @default(autoincrement())
  driverId           Int?
  make               String
  model              String
  year               String
  licensePlate       String
  isApproved         Boolean        @default(false)
  autoInsurancePhoto String?
  hasTrailerHitch    Boolean        @default(false)
  frontVehiclePhoto  String?
  backVehiclePhoto   String?
  movingPartnerId    Int?
  driver             Driver?        @relation(fields: [driverId], references: [id])
  movingPartner      MovingPartner? @relation(fields: [movingPartnerId], references: [id])

  @@index([driverId])
  @@index([movingPartnerId])
}

model DriverAvailability {
  id                     Int                     @id @default(autoincrement())
  driverId               Int
  dayOfWeek              String
  startTime              String
  endTime                String
  maxCapacity            Int                     @default(1)
  isBlocked              Boolean                 @default(false)
  createdAt              DateTime                @default(now())
  updatedAt              DateTime                @updatedAt
  driver                 Driver                  @relation(fields: [driverId], references: [id], onDelete: Cascade)
  driverTimeSlotBookings DriverTimeSlotBooking[]

  @@index([driverId])
}

model DriverTimeSlotBooking {
  id                   Int                @id @default(autoincrement())
  driverAvailabilityId Int
  appointmentId        Int                @unique
  bookingDate          DateTime
  endDate              DateTime
  appointment          Appointment        @relation(fields: [appointmentId], references: [id])
  driverAvailability   DriverAvailability @relation(fields: [driverAvailabilityId], references: [id])

  @@index([bookingDate, driverAvailabilityId])
}

model DriverCancellation {
  id                 Int         @id @default(autoincrement())
  driverId           Int
  appointmentId      Int
  cancellationReason String
  cancellationDate   DateTime    @default(now())
  appointment        Appointment @relation(fields: [appointmentId], references: [id])
  driver             Driver      @relation(fields: [driverId], references: [id])

  @@index([driverId])
  @@index([appointmentId])
}

model MoverCancellation {
  id                 Int           @id @default(autoincrement())
  movingPartnerId    Int
  appointmentId      Int
  cancellationReason String
  cancellationDate   DateTime      @default(now())
  appointment        Appointment   @relation(fields: [appointmentId], references: [id])
  movingPartner      MovingPartner @relation(fields: [movingPartnerId], references: [id])

  @@index([movingPartnerId])
  @@index([appointmentId])
}

model MovingPartnerDriver {
  id              Int           @id @default(autoincrement())
  movingPartnerId Int
  driverId        Int
  isActive        Boolean       @default(true)
  driver          Driver        @relation(fields: [driverId], references: [id])
  movingPartner   MovingPartner @relation(fields: [movingPartnerId], references: [id])

  @@unique([movingPartnerId, driverId])
  @@index([movingPartnerId])
  @@index([driverId])
}

model DriverInvitation {
  id              Int           @id @default(autoincrement())
  token           String        @unique
  movingPartnerId Int
  email           String
  status          String        @default("pending")
  expiresAt       DateTime
  createdAt       DateTime      @default(now())
  acceptedAt      DateTime?
  movingPartner   MovingPartner @relation(fields: [movingPartnerId], references: [id])

  @@index([token])
  @@index([movingPartnerId])
  @@index([email])
}

model VerificationCode {
  id        Int      @id @default(autoincrement())
  contact   String   @unique
  code      String
  expiresAt DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model BlockedDate {
  id          Int      @id @default(autoincrement())
  userId      Int
  userType    String
  blockedDate DateTime
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([userId, userType])
  @@index([blockedDate])
}

model Admin {
  id                         Int                       @id @default(autoincrement())
  email                      String                    @unique
  phoneNumber                String?                   @unique
  name                       String?
  role                       AdminRole                 @default(ADMIN)
  lastLogin                  DateTime?
  createdAt                  DateTime                  @default(now())
  updatedAt                  DateTime                  @updatedAt
  sentInvites                AdminInvite[]
  logs                       AdminLog[]
  blogPosts                  BlogPost[]
  preppedPackingSupplyOrders PackingSupplyOrder[]
  unitCleanings              StorageUnitCleaning[]
  damageReports              StorageUnitDamageReport[]
}

model AdminInvite {
  id          Int       @id @default(autoincrement())
  email       String
  token       String    @unique
  role        AdminRole @default(ADMIN)
  expiresAt   DateTime
  invitedById Int
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  invitedBy   Admin     @relation(fields: [invitedById], references: [id])
}

model AdminLog {
  id         Int      @id @default(autoincrement())
  adminId    Int
  action     String
  targetType String
  targetId   String
  createdAt  DateTime @default(now())
  admin      Admin    @relation(fields: [adminId], references: [id])
}

model StorageUnitDamageReport {
  id                Int         @id @default(autoincrement())
  storageUnitId     Int
  appointmentId     Int
  adminId           Int
  reportDate        DateTime    @default(now())
  damageDescription String
  damagePhotos      String[]
  actionTaken       String?
  status            String      @default("Pending")
  notes             String?
  admin             Admin       @relation(fields: [adminId], references: [id])
  appointment       Appointment @relation(fields: [appointmentId], references: [id])
  storageUnit       StorageUnit @relation(fields: [storageUnitId], references: [id])

  @@index([storageUnitId])
  @@index([appointmentId])
  @@index([adminId])
  @@index([reportDate])
}

model StorageUnitCleaning {
  id            Int         @id @default(autoincrement())
  storageUnitId Int
  adminId       Int
  cleanedAt     DateTime    @default(now())
  photos        String[]
  admin         Admin       @relation(fields: [adminId], references: [id])
  storageUnit   StorageUnit @relation(fields: [storageUnitId], references: [id])

  @@index([storageUnitId])
  @@index([adminId])
  @@index([cleanedAt])
}

model PackingSupplyOrderCancellation {
  id                   Int                @id @default(autoincrement())
  packingSupplyOrderId Int
  userId               Int
  cancellationReason   String
  cancellationFee      Float?
  cancellationDate     DateTime           @default(now())
  refundAmount         Float?
  refundStatus         String?            @default("pending")
  adminNotes           String?
  packingSupplyOrder   PackingSupplyOrder @relation(fields: [packingSupplyOrderId], references: [id])
  user                 User               @relation(fields: [userId], references: [id])

  @@index([packingSupplyOrderId])
  @@index([userId])
  @@index([cancellationDate])
}

model Notification {
  id                 Int                 @id @default(autoincrement())
  recipientId        Int
  recipientType      UserType
  type               NotificationType
  title              String
  message            String
  status             NotificationStatus  @default(UNREAD)
  groupKey           String?
  groupCount         Int?                @default(1)
  appointmentId      Int?
  orderId            Int?
  routeId            String?
  taskId             String?
  driverId           Int?
  movingPartnerId    Int?
  createdAt          DateTime            @default(now())
  readAt             DateTime?
  archivedAt         DateTime?
  appointment        Appointment?        @relation(fields: [appointmentId], references: [id])
  packingSupplyOrder PackingSupplyOrder? @relation(fields: [orderId], references: [id])

  @@index([recipientId, recipientType, status])
  @@index([createdAt])
  @@index([type])
  @@index([groupKey])
  @@index([status])
}

model NotificationSettings {
  id                     Int      @id @default(autoincrement())
  userId                 Int      @unique
  userType               UserType
  enableAppNotifications Boolean  @default(true)
  enableEmailDigest      Boolean  @default(true)
  digestFrequency        String   @default("weekly")
  createdAt              DateTime @default(now())
  updatedAt              DateTime @updatedAt

  @@index([userId, userType])
}

model BlogPost {
  id               Int                @id @default(autoincrement())
  title            String
  slug             String             @unique
  excerpt          String?
  content          String
  featuredImage    String?
  featuredImageAlt String?
  metaTitle        String?
  metaDescription  String?
  categoryId       Int?
  status           BlogStatus         @default(DRAFT)
  publishedAt      DateTime?
  readTime         Int?
  viewCount        Int                @default(0)
  authorId         Int
  authorName       String?
  authorImage      String?
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
  contentBlocks    BlogContentBlock[]
  author           Admin              @relation(fields: [authorId], references: [id])
  category         BlogCategory?      @relation(fields: [categoryId], references: [id])
  tags             BlogPostTag[]

  @@index([slug])
  @@index([status, publishedAt])
  @@index([categoryId])
  @@index([authorId])
  @@index([publishedAt])
}

model BlogCategory {
  id          Int        @id @default(autoincrement())
  name        String     @unique
  slug        String     @unique
  description String?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  posts       BlogPost[]

  @@index([slug])
}

model BlogTag {
  id        Int           @id @default(autoincrement())
  name      String        @unique
  slug      String        @unique
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
  posts     BlogPostTag[]

  @@index([slug])
}

model BlogPostTag {
  id         Int      @id @default(autoincrement())
  blogPostId Int
  blogTagId  Int
  blogPost   BlogPost @relation(fields: [blogPostId], references: [id], onDelete: Cascade)
  blogTag    BlogTag  @relation(fields: [blogTagId], references: [id], onDelete: Cascade)

  @@unique([blogPostId, blogTagId])
  @@index([blogPostId])
  @@index([blogTagId])
}

model BlogContentBlock {
  id         Int                  @id @default(autoincrement())
  blogPostId Int
  type       BlogContentBlockType
  content    String
  metadata   Json?
  order      Int
  blogPost   BlogPost             @relation(fields: [blogPostId], references: [id], onDelete: Cascade)

  @@index([blogPostId, order])
}

model GoogleReview {
  id            Int       @id @default(autoincrement())
  customer      String
  date          String
  publishTime   DateTime?
  description   String
  rating        Int
  photoUrl      String?
  googleMapsUrl String?
  contentHash   String    @unique
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([rating])
}

enum MovingPartnerStatus {
  ACTIVE
  INACTIVE
  PENDING
}

enum DriverAssignmentMode {
  MANUAL
  AUTO
}

enum AdminRole {
  SUPERADMIN
  ADMIN
  VIEWER
}

enum NotificationType {
  APPOINTMENT_CONFIRMED
  APPOINTMENT_UPDATED
  APPOINTMENT_STARTED
  APPOINTMENT_COMPLETED
  APPOINTMENT_CANCELLED
  APPOINTMENT_REMINDER
  JOB_OFFER_RECEIVED
  JOB_ASSIGNED
  JOB_DETAILS_UPDATED
  JOB_CANCELLED
  RECONFIRMATION_REQUIRED
  NEW_JOB_AVAILABLE
  JOB_COMPLETED
  CUSTOMER_CANCELLATION
  ORDER_CONFIRMED
  ORDER_BEING_PREPARED
  DRIVER_EN_ROUTE
  DELIVERY_COMPLETED
  ORDER_CANCELLED
  ROUTE_OFFER
  ROUTE_ASSIGNED
  ROUTE_CANCELLED
  PAYMENT_FAILED
  REFUND_PROCESSED
  INVOICE_AVAILABLE
  PAYOUT_PROCESSED
  PAYOUT_FAILED
  EARNINGS_SUMMARY
  FEEDBACK_RECEIVED
  TIP_RECEIVED
  ACCOUNT_APPROVED
  ACCOUNT_SUSPENDED
  VEHICLE_APPROVED
  VEHICLE_REJECTED
  NEW_DRIVER_APPLICATION
  DRIVER_APPROVED
  MOVER_PENDING_DRIVERS
  MOVER_ACTIVATED
  TEAM_STATUS_UPDATE
  SYSTEM_MAINTENANCE
  NEW_FEATURE_ANNOUNCEMENT
  POLICY_UPDATES
  SECURITY_ALERT
  STORAGE_ACCESS_REMINDER
  STORAGE_PAYMENT_DUE
  COMPLIANCE_ISSUE
  PERFORMANCE_ALERT
}

enum NotificationStatus {
  UNREAD
  READ
  ARCHIVED
}

enum UserType {
  USER
  DRIVER
  MOVER
  ADMIN
}

enum BlogStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

enum BlogContentBlockType {
  PARAGRAPH
  HEADING
  IMAGE
  QUOTE
  LIST
  CODE
}
